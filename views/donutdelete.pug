extends layout
block content
h1= title
if (toShow == null)
h2 No instance to delete
else
- let donutid = toShow._id
- let cakeFlavor = toShow.cakeFlavor
- let iceFlavor = toShow.iceFlavor
- let sprinkleAmount = toShow.sprinkleAmount
- let actionid = "/resource/donut/" + donutid
script let actionid = "#{actionid}"
div
div.row
div(class='costumeAttr mr-3') Donut ID is:
div #{donutid}
div.row
div(class='donutAttr mr-3') Donut Type is:
div #{donut_type}
div.row
div(class='donutAttr mr-3') Donut Size is:
div #{costumesize}
div.row
div(class='donutAttr mr-3') Donut Cost is:
div #{donutcost}
button(class="btn btn-danger m-2" onclick="deleteOnid()") Delete
button(class="btn btn-secondary m-2" onclick="cancel()") Cancel
script.
function cancel() {
// Go back to the home page for the costume collection
window.location.href='/donut'
}
script.
function deleteOnid() {
console.log("starting delete")
// delete first
fetch(actionid, {
method: 'DELETE' // Don't need a body for the delete
}).then((resp) => {
return resp.json(); // or resp.text() or whatever the server sends
}).then((body) => {
alert("Delete succeded")
window.location.href='/donut'
// TODO handle body
}).catch((error) => {
// TODO handle error
alert("Delete failed " + error )
});
}

